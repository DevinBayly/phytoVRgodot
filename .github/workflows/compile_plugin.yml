name: GitHub Actions Demo
run-name: ${{ github.actor }} is testing out GitHub Actions ðŸš€
on: [push]
jobs:
  Explore-GitHub-Actions:
    runs-on: windows-latest
    steps:
      # go get python scons
      - name: Set up Python 3.x
        uses: actions/setup-python@v4
        with:
          # Semantic version range syntax or exact version of a Python version
          python-version: ${{ inputs.python-version }}
          # Optional - x64 or x86 architecture, defaults to x64
          architecture: ${{ inputs.python-arch }}
      - name: Setup scons
        shell: bash
        run: |
          python -c "import sys; print(sys.version)"
          python -m pip install scons
          scons --version

      - name: get repo 
        uses: actions/checkout@v3
       
      - name: cache-godot-cpp
        id: cache-dev-dir
        uses: actions/cache@v3
        with:
         path: ./godot-cpp
         key: dev-dir-1.0 
      - name: get repo 
        if: steps.cache-dev-dir.outputs.cache-hit != 'true'
        uses: actions/checkout@v3
        with:
            submodules: recursive
      - name: make-godot-cpp
        if: steps.cache-dev-dir.outputs.cache-hit != 'true'
        run: |
          cd godot-cpp;scons platform=windows generate_bindings=yes target=release -j4
      - run: |
         dir
      - name: build plugin
        if: steps.cache-dev-dir.outputs.cache-hit == 'true'
        run: |
         scons platform=windows target=release
     
      - name: releasepush
        id: create_release
        uses: actions/create-release@v1
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }} # This token is provided by Actions, you do not need to create your own token
        with:
          tag_name: ${{ github.ref }}
          release_name: Release ${{ github.ref }}
          body: |
            Changes in this Release
            - First Change
            - Second Change
          draft: false
          prerelease: false
    
